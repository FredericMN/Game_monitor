# 游戏动态监控网站 - 开发策划文档 (V0.3)

**文档状态:** 初稿完成 MVP，进入迭代阶段。

**1. 项目愿景与目标**

*   **愿景:** 创建一个专注于游戏市场动态，特别是新游戏上线、测试计划、核心信息的数据平台，旨在为行业内（或对游戏市场高度关注的）用户提供准确、及时、易于浏览的数据服务。
*   **目标 (第一阶段 - MVP):** [已完成 V0.1]
    *   [X] 实现从指定 Excel 文件 (`data/sample_games.xlsx`) 中读取游戏数据。
    *   [X] 通过后端 API (`/api/games`) 将处理后的数据提供给前端。
    *   [X] 在网页前端以清晰、美观的格式展示游戏信息，包括：
        *   [X] 一个"重点关注"区域，展示筛选出的少量关键游戏（卡片形式，目前取前 8 条）。
        *   [X] 一个"全部游戏列表"区域，展示所有游戏数据（表格形式）。
    *   [X] 建立可持续维护和扩展的基础项目结构和代码规范 (前后端分离, Git, 虚拟环境, 启动脚本)。

**2. 目标用户 (初步设想)**

*   游戏行业分析师、市场研究人员。
*   游戏发行商、开发商内部相关团队（如市场、运营、战略部门）。
*   对游戏行业动态有深度关注的媒体或个人。
*   *（此部分可在后续根据业务发展进一步明确）*

**3. 核心功能 (V0.3 及后续迭代关注点)**

*   **数据源管理与维护:**
    *   **当前状态:** 
        *   [~] 已建立脚本从多个数据源（TapTap、好游快爆）采集游戏信息 (需要修正)。
        *   [~] 建立数据标准化流程，统一不同来源的数据格式 (需要确认并适配 Excel 输出)。
        *   [~] 实现数据自动导出到 Excel 文件供后端使用 (需要确认逻辑)。
    *   **待解决/优化:**
        *   [ ] **完善数据更新流程:** 设置定时任务，每日或每周自动更新游戏数据。
        *   [~] **数据校验:** 实现多来源数据的去重和合并 (需要确认并适配 Excel 输出)。
        *   [~] **多数据源支持:** 支持从多个网站获取游戏信息，目前已接入 TapTap 和好游快爆 (需要修正脚本)。
        *   [ ] **数据库迁移:** (长期考虑) 数据量增大或需要更复杂查询时，考虑将数据迁移到数据库 (如 PostgreSQL, MySQL)。
*   **后端 (`backend/`):**
    *   **已完成:**
        *   [X] Flask 基础搭建。
        *   [X] 使用 Pandas 读取 Excel。
        *   [X] 处理 NaN 并提供 `/api/games` JSON 端点 (初步版本，待优化)。
        *   [X] 启用 CORS。
    *   **待开发/优化:**
        *   [ ] **数据加载优化:** 确认后端 `app.py` 能正确加载 `data/sample_games.xlsx`。
        *   [ ] **"重点关注"逻辑实现:** 在后端 API 中根据 Excel 中的 "是否重点" 列实现筛选逻辑。
        *   [ ] **API 参数化:** (中期考虑) 允许前端通过 API 参数进行筛选、排序、分页 (e.g., `/api/games?status=测试&sort=日期&page=1`)。
        *   [ ] **错误处理与日志:** 完善 API 的错误处理机制和日志记录。
*   **前端 (`frontend/`):**
    *   **已完成:**
        *   [X] HTML 结构 (导航栏, 重点区域, 列表区域)。
        *   [X] CSS 样式 (分离到 `style.css`, 卡片, 表格, 状态标签)。
        *   [X] JavaScript 通过 `fetch` 调用 API 并动态渲染数据。
        *   [X] 解决了 CORS 及 `NaN` 问题。
        *   [X] 基础状态标签样式逻辑。
    *   **待开发/优化:**
        *   [ ] **基础搜索/筛选:** 在前端添加简单的输入框或下拉菜单，用 JavaScript 实现对**当前已加载数据**的实时筛选 (按游戏名称、状态等)。
        *   [ ] **分页:** (配合后端 API 参数化) 当数据量很大时，实现前端分页显示。
        *   [ ] **用户体验:** 优化加载状态提示，处理空数据情况下的显示。
        *   [ ] **交互细节:** (可选) 点击卡片或表格行跳转到详情页（需要后端支持）。
*   **项目维护:**
    *   **已完成:**
        *   [X] Git 初始化与 GitHub 链接。
        *   [X] 基础目录结构。
        *   [X] `.gitignore` 配置 (忽略 venv, logs)。
        *   [X] 开发环境启动脚本 (`start_dev.sh`, `start_dev.bat`)。
        *   [X] **依赖管理:** 创建 `requirements.txt` 文件，记录后端 Python 依赖。(`pip freeze > requirements.txt`)
    *   **待完成:**
        *   [ ] **README 文件:** 编写 `README.md`，说明项目用途、如何安装和运行。(暂时推迟)

**4. 技术选型 (当前阶段)**

*   **前端:** HTML5, CSS3, JavaScript (原生)
*   **后端:** Python 3.x, Flask, Pandas, Flask-CORS, openpyxl
*   **数据采集:** Python (Selenium, BeautifulSoup, Requests)
*   **数据存储:** Excel 文件 (`.xlsx`)
*   **版本控制:** Git, GitHub
*   **开发环境:** Windows 10, Python 虚拟环境 (venv)

**5. 未来扩展方向 (非 MVP - 同 V0.1，保持关注)**

*   数据源增强 (数据库, API 对接)
*   功能增强 (用户认证, 数据后台, 高级搜索/筛选/排序, 详情页, 可视化, 关注/通知)
*   架构优化 (部署, 任务队列, 缓存, 前端框架)
*   商业化

**6. 开发计划 (下一步)**

*   **优先级 1 (数据采集脚本修正):**
    1.  **修正 TapTap 脚本:** 调试并修正 `scripts/taptap_selenium.py`，确保能稳定抓取所需信息。
    2.  **修正好游快爆脚本:** 调试并修正 `scripts/haoyou_selenium.py`，确保能稳定抓取所需信息。
*   **优先级 2 (数据处理与输出):**
    1.  **调整 `collect_games.py`:** 确认数据标准化、去重逻辑符合要求，并将最终结果正确输出到 `data/sample_games.xlsx` 文件。
*   **优先级 3 (后端整合与验证):**
    1.  **验证后端数据加载:** 确认 `backend/app.py` 能正确读取更新后的 Excel 文件。
    2.  **实现后端"重点关注"逻辑:** 根据 Excel 数据实现 `/api/featured-games` 功能。
*   **优先级 4 (整体测试):**
    1.  运行 `scripts/collect_games.py` 脚本，生成最新的 Excel 数据。
    2.  运行后端服务 (`backend/app.py`)。
    3.  运行前端应用，检查数据是否正确显示，特别是重点关注部分。
*   **优先级 5 (后续优化 - 暂缓):**
    1.  ~~自动化数据采集: 设置定时任务，定期运行数据采集脚本。~~
    2.  ~~API 参数化、前端搜索/分页、README 等。~~

--- 